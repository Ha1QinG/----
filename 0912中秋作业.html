<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

  <script>


    // // 找到最长的单词
    // var str = "hello world,my name is tom";
    // function fn(str) {
    //   var obj = {};
    //   var result = {};
    //   str = str.replaceAll(',', ' ')
    //   str = str.split(' ')
    //   for (let i = 0; i < str.length; i++) {
    //     obj[str[i]] = str[i].length;
    //   }

    //   var max = 0;
    //   var word = [];
    //   for (const key in obj) {
    //     if (obj.hasOwnProperty(key)) {
    //       const k = obj[key];
    //       if (k >= max) {
    //         max = k;
    //         word.push(key)
    //       }
    //     }
    //   }
    //   return { word, max };
    // }

    // console.log(fn(str));



    // // n的阶乘
    // function fn(n) {
    //   var result = 1;
    //   while (n) {
    //     result *= n;
    //     n--;
    //   }
    //   return result;
    // }



    // // 找最大差值
    // function fn(arr) {
    //   var min = Number.MAX_SAFE_INTEGER
    //   var max = Number.MIN_SAFE_INTEGER
    //   var result = null
    //   for (var k of arr) {
    //     min = (k < min ? k : min)
    //     max = (k > max ? k : max)
    //   }
    //   result = (max - min)
    //   return result;
    // }

    // var arr = [1,23,46,11]
    // console.log(fn(arr))


    // // sum(x)(y) == sum(x,y)
    // function fn(x) {
    //   var a = arguments[0]
    //   if (arguments[1]) {
    //     return a + arguments[1];
    //   } else {
    //     var sum = 0;
    //     return function (y) {
    //       sum = a + y;
    //       return sum;
    //     }
    //   }
    // }

    // console.log(fn(4, 5));
    // console.log(fn(4)(5));



    // // 找出频率最高的词
    // function fn(str) {
    //   var newObj = {};
    //   str = str.toLowerCase();
    //   str = str.replaceAll(', ', ' ')
    //   str = str.replaceAll('. ', ' ')
    //   str = str.replaceAll('! ', ' ')
    //   var arr = str.split(/[\s\,\.\!\?;]/)

    //   for (const k of arr) {
    //     if (k in newObj) {
    //       newObj[k] += 1;
    //     } else {
    //       newObj[k] = 1;
    //     }
    //   }
    //   var max = 0;
    //   var result = '';
    //   for (const key in newObj) {
    //     if (newObj.hasOwnProperty(key)) {
    //       const k = newObj[key];
    //       if (k > max) {
    //         max = k;
    //         result = key;
    //       }
    //     }
    //   }
    //   return [result,max];
    // }

    // var texts = 'I have a pen, I have an apple, Uh! apple pen. Pen pineapple apple pen.'
    // console.log(fn(texts));

    // const mostFrequentWord = Object.entries(
    //   texts.toLowerCase()
    //     .split(/[\s\,\.\!\?;]/)
    //     .filter(word => word)
    //     .reduce((sum, word) => ({ ...sum, [word]: (sum[word] || 0) + 1 }), {})
    // ).sort((a, b) => b[1] - a[1])[0];

    // // console.log(mostFrequentWord);



    // // 16
    // var a = [1, 2, 3]
    // // 重新数组的转字符串方法
    // a.join = a.shift
    // console.log(a == 1 && a == 2 && a == 3)
    // console.log(a === 1 && a === 2 && a === 3)

    // var a = {
    //   i: 1,
    //   // 覆盖对象的转字符串方法
    //   toString: function () {
    //     return a.i++
    //   }
    // }
    // console.log(a == 1 && a == 2 && a == 3)
    // console.log(a === 1 && a === 2 && a === 3)

    // var value = 1;
    // Object.defineProperty(window, "a", {
    //   get() {
    //     return this.value++;
    //   }
    // });

    // console.log(a === 1 && a === 2 && a === 3)  // true 只能生效一次


    // //IIFE
    // (function (a, b) {
    //   var result = 10;
    //   return result + a + b;
    // })

    // console.log(('b' + 'a' + +'a' + 'a'))


    // // 单词倒转
    // function fn(str) {
    //   var arr = str.split(' ')
    //   arr = arr.map(function (item) {
    //     return item.split('').reverse().join('')
    //   }).join(' ')
    //   return arr;
    // }
    // var str = 'my love'
    // console.log(fn(str))



    // // 正则下划线转驼峰法
    // function fn(name){
    //   var reg = new RegExp(/\_\w/g)
    //   name = name.replaceAll(reg,function(item){
    //     return item.slice(1).toUpperCase();
    //   })
    //   return name
    // }
    // var str = 'my_name_is_tony';
    // console.log(fn(str))    // myNameIsTony


    // // 实现千分位符
    // var numb = 1234567654321

    // console.log(parseFloat(numb).toLocaleString());

    // function fn(number) {
    //   var reg = /\d{1,3}(?=(\d{3})+$)/g;
    //   return (number + '').replace(reg, '$&,');
    // }
    // console.log(fn(numb));

    // function fn(number) {
    //   var result = '';
    //   number.toString().split('').reverse().forEach(function (item, i) {
    //     if (i !== 0 && i % 3 === 0) {
    //       result = item + ',' + result;
    //     } else {
    //       result = item + result;
    //     }
    //   })
    //   return result;
    // }
    // console.log(fn(numb))


    // // 红绿灯程序
    // var traffic = {
    //   0: 'red',
    //   1: 'green',
    //   '-1': 'yellow'
    // }
    // var now = 'red';    // 当前状态
    // var seconds = 10;   // 时间间隔
    // var flag = null;

    // // 得到当前状态
    // for (const k in traffic) {
    //   if (traffic.hasOwnProperty(k)) {
    //     const key = traffic[k];
    //     if (key === now) {
    //       flag = k;
    //     }
    //   }
    // }

    // function lights() {

    //   // 红灯，变黄灯
    //   if (flag == 0) {
    //     if (seconds >= 0) {
    //       console.log('红灯', seconds)
    //       seconds--;
    //     } else {
    //       flag = '-1';
    //       seconds = 3;
    //     }
    //   }

    //   // 黄灯，变绿灯
    //   if (flag == '-1') {
    //     if (seconds >= 0) {
    //       console.log('黄灯', seconds)
    //       seconds--;
    //     } else {
    //       flag = '1';
    //       seconds = 10;
    //     }
    //   }

    //   // 绿灯，变红灯
    //   if (flag == 1) {
    //     if (seconds >= 0) {
    //       console.log('绿灯', seconds)
    //       seconds--;
    //     } else {
    //       flag = '0';
    //       seconds = 10
    //     }
    //   }

    // }

    // lights()
    // setInterval(lights, 1000)


  </script>

  <button id="btn">开门</button>

  <script>

    // 电梯运行程序

    btn.onclick = myFn()
    
    function myFn() {
      var timer = null;
      return function () {
        var seconds = 5;
        console.log('开门')
        if (timer) {
          clearTimeout(timer);
        }
        timer = setInterval(function () {
          console.log('电梯还有' + seconds + '秒关闭')
          if (seconds == 0) {
            clearInterval(timer)
            console.log('电梯门关闭')
          }
          seconds--;
        }, 1000)
      }
    }

  </script>


</body>

</html>