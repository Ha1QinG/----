<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

  <script>
    var data = [
      { id: 1, pid: 0, name: '江西省' },
      { id: 2, pid: 0, name: '浙江省' },
      { id: 11, pid: 1, name: '南昌市' },
      { id: 12, pid: 1, name: '九江市' },
      { id: 21, pid: 2, name: '温州市' },
      { id: 22, pid: 2, name: '杭州市' },
      { id: 111, pid: 11, name: '高新区' },
      { id: 112, pid: 11, name: '西湖区' },
    ]

    console.log(fn(data))

    function fn(arr, id = 0, newData = []) {
      for (var i = 0; i < arr.length; i++) {
        if (arr[i].pid == id) {
          newData.push(arr[i]);
          var children = fn(arr, arr[i].id);
          if (children) {
            arr[i].children = children;
          }
        }
      }
      return newData;
    }



    // function render(treeData, id = 0) {
    //   var result = [];
    //   treeData.forEach(function (item) {
    //     if (item.pid === id) {
    //       result.push(item);
    //       var children = render(treeData, item.id);
    //       if (children && children.length) {
    //         item.children = children;
    //       }
    //     }
    //   });
    //   return result;
    // }


    // console.log(render(data));



  </script>

</body>

</html>